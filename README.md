# Космический Телеграм
Проект позволяет загружать фотографии с разных трех ресурсов,
отправлять фотографию в ручную или все фотографии с заданной 
пользователем частотой времени автоматически,
а так же отправлять сообщения в телеграм канал.
Все файлы в проекте можно запускаются самостоятельно.



### Технологии
- Python 3.10
- requests 2.28.1
- python-dotenv 0.9.1
- python-telegram-bot=13.14

### Запуск проекта
- Зайдите по ссылки (https://github.com/serega19851/Web-Services-API-lesson-4), клонируйте проект к себе локально.
- Установите и активируйте виртуальное окружение внутри проекта
```
sudo apt install python3.10-venv
python3.10 -m venv venv
```
- Установите зависимости в активированном виртуальном окружении из файла requirements.txt
```
python3.10 -m pip install -r requirements.txt
```
- установку зависимостей можно проверить командой 
```
python3.10 -m pip list
```
### Регистрация бота в Telegram - BotFather и получение токена.
Ссылка с инструкцией: 
https://way23.ru/%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B2-telegram.html

### Создаем телеграмм канал и ставим бота администратором канала
ссылка с инструкцией:
https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/

### Фaйл all_pictures_in_telegram.py
Публикует в телеграм канале из папки все загруженные фотографии по одной 
с задержкой по времени, время можно менять и индефикатор id_chata.

Создаем файл .env в папке проекта, командой в терминале.
```
touch .env
```
В файл .env прописываем переменные:

PUBLICATION_FREQUENCY записываем значение в секундах  название переменой остается как в примере его не меняем.

TELEGRAM_CHAT_ID не меняем, а значение переменной можно прописать другое

TELEGRAM_BOT_TOKEN не меняем, а значения прописываться ваше 

Пример:
```
PUBLICATION_FREQUENCY='14400'
TELEGRAM_CHAT_ID='-100181....'
TELEGRAM_BOT_TOKEN='5727...........'
```
Команда запуска файла, производится в папке проекта.

```
python3.10 all_pictures_in_telegram.py 
```
### Файл text_to_telegram.py
Отправляет сообщение в канал телеграмм. Токен бота и создать канал смотрите выше.

Команда запуска файла, производится в папке проекта.

```
python3.10 text_to_telegram.py
```


### Файл fetch_spacex_images.py
Автоматически создает пустой каталог(название "images") в папку проекта и скачивает фотографии с сайта spaceX.
Команда запуска файла, производится в папке проекта.

```
python3.10 fetch_spacex_images.py 
```
Второй вариант с аргументом(id) в командной строке.
```
python3.10 fetch_spacex_images.py 5eb87d42ffd86e000604b384
```

### Файл nasa_apod_photos.py
Автоматически создает пустой каталог(название "images") в папку проекта и скачивает 30 фото с сайта NASA.
Предварительно нужно получить  API Key на сайте (https://api.nasa.gov/)

В созданном ранее файле .env пишем переменную:
NASA_API_KEY='ваш API Key'

Команда запуска файла, производится в папке проекта.
```
python3.10 nasa_apod_photos.py
```

### Файл nasa_epic_photos.py
Автоматически создает пустой каталог(название "images") в папку проекта и скачивает 1-10 фото с сайта NASA.
Предварительно нужно получить  API Key на сайте (https://api.nasa.gov/)

В созданном ранее файле .env пишем переменную:
NASA_API_KEY='ваш API Key'

Команда запуска файла, производится в папке проекта.
```
python3.10 nasa_epic_photos.py
```
Время ожидания загрузки фотографий 1-5 минут.

### Файл picture_to_telegram.py 
Выбирает рандомно одну фотографию из паки("images"), 
которая создалась автоматически при загрузке фотографий в папке проекта и выкладывает ее 
в телеграм канал. Как создавать канал в телеграмме и токен бота смотрите выше.

Команда запуска файла, производится в папке проекта.
```
python3.10 picture_to_telegram.py 
```

### Вспомогательный файл supporting.py нужен для импорта в других файлах.
Имеет две функции:
- save_picture принимает адрес фотографии, принимает путь каталога для сохранения фото.
- get_the_file_extension принимает адрес фотографии, выдает расширение файла.

